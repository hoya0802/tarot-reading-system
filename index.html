<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ</title>
    
    <!-- CSS íŒŒì¼ -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/tarot.css">
    
    <!-- Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”®</text></svg>">
    
    <!-- ë””ë²„ê¹…ìš© ìŠ¤íƒ€ì¼ -->
    <style>
        .debug-info {
            background: #f0f0f0;
            padding: 10px;
            margin: 10px;
            border: 1px solid #ccc;
            font-family: monospace;
            font-size: 12px;
        }
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            margin: 10px;
            border: 1px solid #ef5350;
        }
        .success {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 10px;
            margin: 10px;
            border: 1px solid #66bb6a;
        }
    </style>
</head>
<body>
    <!-- ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ -->
    <div class="debug-info">
        <h3>ğŸ”® íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ - ê¸°ë³¸ í…ŒìŠ¤íŠ¸</h3>
        <p>ì´ í˜ì´ì§€ê°€ ë³´ì¸ë‹¤ë©´ ê¸°ë³¸ HTMLì€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.</p>
        <p>í˜„ì¬ ì‹œê°„: <span id="current-time"></span></p>
        <p>Vue.js ë¡œë”© ìƒíƒœ: <span id="vue-status">í™•ì¸ ì¤‘...</span></p>
        <p>CSS ë¡œë”© ìƒíƒœ: <span id="css-status">í™•ì¸ ì¤‘...</span></p>
    </div>

    <div id="app">
        <!-- ë¡œë”© í™”ë©´ -->
        <div v-if="isLoading" class="loading-screen">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h2>íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ ë¡œë”© ì¤‘...</h2>
                <p>{{ loadingMessage }}</p>
            </div>
        </div>

        <!-- ì„¤ì • ì•ˆë‚´ í™”ë©´ -->
        <div v-if="showSetupGuide" class="setup-guide">
            <div class="setup-content">
                <h1>ğŸ”® íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ ì„¤ì •</h1>
                <div class="setup-steps">
                    <h3>ì„¤ì • ë‹¨ê³„:</h3>
                    <ol>
                        <li>Supabase í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”</li>
                        <li>ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ì •í•˜ì„¸ìš”</li>
                        <li>Supabase ì—°ê²° ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</li>
                        <li>í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”</li>
                    </ol>
                </div>
                <div class="setup-help">
                    <h3>ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</h3>
                    <p>README.md íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ì„¤ì •ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.</p>
                    <button @click="checkConnection" class="btn btn-primary">ì—°ê²° í™•ì¸</button>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ -->
        <div v-if="!isLoading && !showSetupGuide" class="main-app">
            <!-- í—¤ë” -->
            <header class="app-header">
                <h1>ğŸ”® íƒ€ë¡œ ë¦¬ë”© ì‹œìŠ¤í…œ</h1>
                <p>ë‹¹ì‹ ì˜ ìš´ëª…ì„ ì¹´ë“œë¡œ ì½ì–´ë³´ì„¸ìš”</p>
            </header>

            <!-- ë©”ì¸ ì»¨í…ì¸  -->
            <main class="app-main">
                <!-- ëª©ì  ì„ íƒ -->
                <purpose-selector 
                    v-if="currentStep === 'purpose'"
                    @purpose-selected="onPurposeSelected">
                </purpose-selector>

                <!-- íƒ€ë¡œ ë± -->
                <tarot-deck 
                    v-if="currentStep === 'deck'"
                    :cards="cards"
                    @selection-complete="onCardSelectionComplete">
                </tarot-deck>

                                                  <!-- ì¹´ë“œ ìŠ¤í”„ë ˆë“œ -->
                  <card-spread 
                      v-if="currentStep === 'spread' && selectedCards && selectedCards.length > 0"
                      :selectedCards="selectedCards"
                      @start-reading="onStartReading()"
                      @reshuffle="onReshuffle">
                  </card-spread>

                <!-- ë¦¬ë”© ê²°ê³¼ -->
                <reading-result 
                    v-if="currentStep === 'result'"
                    :readingData="readingData"
                    @new-reading="onNewReading">
                </reading-result>

                <!-- ì‚¬ìš©ì íˆìŠ¤í† ë¦¬ -->
                <user-history 
                    v-if="currentStep === 'history'"
                    @back-to-main="currentStep = 'purpose'">
                </user-history>
            </main>

            <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
            <nav class="app-nav">
                <button @click="currentStep = 'purpose'" class="nav-btn">ğŸ  í™ˆ</button>
                <button @click="currentStep = 'history'" class="nav-btn">ğŸ“š íˆìŠ¤í† ë¦¬</button>
                <button @click="showConnectionStatus" class="nav-btn">ğŸ”— ì—°ê²° ìƒíƒœ</button>
            </nav>
        </div>
    </div>

    <!-- ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="module">
        import supabase, { checkSupabaseConnection, showSetupGuide, simpleConnectionTest } from './js/services/supabase.js';
        import { loadCards, tarotService } from './js/services/tarotService.js';

        const { createApp } = Vue;

        // Vue ì»´í¬ë„ŒíŠ¸ë“¤ ì •ì˜
        const PurposeSelector = {
            props: ['selectedPurpose'],
            data() {
                return {
                    purposes: [
                        { code: 'love', name: 'ì—°ì• /ì‚¬ë‘', icon: 'ğŸ’•', color: '#ff6b6b', description: 'ì‚¬ë‘ê³¼ ê´€ê³„ì— ê´€í•œ í•´ì„' },
                        { code: 'career', name: 'ì§ì¥/ì¼', icon: 'ğŸ’¼', color: '#4ecdc4', description: 'ì§ì¥ê³¼ ì—…ë¬´ì— ê´€í•œ í•´ì„' },
                        { code: 'daily', name: 'ì˜¤ëŠ˜ì˜ ìš´ì„¸', icon: 'â˜€ï¸', color: '#45b7d1', description: 'ì˜¤ëŠ˜ í•˜ë£¨ì˜ ì „ë°˜ì ì¸ ìš´ì„¸' },
                        { code: 'health', name: 'ê±´ê°•', icon: 'ğŸŒ¿', color: '#96ceb4', description: 'ê±´ê°•ê³¼ ì›°ë¹™ì— ê´€í•œ í•´ì„' },
                        { code: 'money', name: 'ê¸ˆì „', icon: 'ğŸ’°', color: '#feca57', description: 'ì¬ì •ê³¼ ëˆì— ê´€í•œ í•´ì„' }
                    ]
                };
            },
            template: `
                <div class="section purpose-selector">
                    <h2>ğŸ”® ë¦¬ë”© ëª©ì ì„ ì„ íƒí•˜ì„¸ìš”</h2>
                    <p class="text-center mb-3">ì–´ë–¤ ë¶„ì•¼ì— ëŒ€í•´ ê¶ê¸ˆí•œê°€ìš”?</p>
                    
                    <div class="purpose-grid">
                        <div 
                            v-for="purpose in purposes" 
                            :key="purpose.code"
                            class="purpose-item"
                            :class="{ 'selected': selectedPurpose === purpose.code }"
                            :style="{ borderColor: purpose.color }"
                            @click="$emit('purpose-selected', purpose.code)">
                            
                            <div class="purpose-icon">{{ purpose.icon }}</div>
                            <div class="purpose-name">{{ purpose.name }}</div>
                            <div class="purpose-description">{{ purpose.description }}</div>
                            
                            <div v-if="selectedPurpose === purpose.code" class="selected-indicator">
                                âœ“ ì„ íƒë¨
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        const TarotDeck = {
            props: ['cards'],
            data() {
                return {
                    selectedCards: [],
                    isSelecting: false
                };
            },
            template: `
                <div class="section tarot-deck">
                    <h2>ğŸƒ íƒ€ë¡œ ì¹´ë“œ ëœë¤ ì„ íƒ</h2>
                    <p class="text-center mb-3">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¹´ë“œë¥¼ ëœë¤í•˜ê²Œ ì„ íƒí•˜ì„¸ìš” ({{ selectedCards.length }}/3)</p>
                    
                    <!-- ëœë¤ ì„ íƒ ë²„íŠ¼ -->
                    <div class="random-selection-area">
                        <button 
                            @click="selectRandomCard" 
                            :disabled="selectedCards.length >= 3 || isSelecting"
                            class="btn btn-primary random-select-btn">
                            <span v-if="!isSelecting">ğŸ² ì¹´ë“œ ëœë¤ ì„ íƒ</span>
                            <span v-else>ì„ íƒ ì¤‘...</span>
                        </button>
                        
                        <button 
                            @click="resetSelection" 
                            :disabled="selectedCards.length === 0"
                            class="btn btn-secondary reset-btn">
                            ğŸ”„ ë‹¤ì‹œ ì‹œì‘
                        </button>
                    </div>
                    
                    <!-- ì„ íƒëœ ì¹´ë“œ í‘œì‹œ -->
                    <div v-if="selectedCards.length > 0" class="selected-cards-display">
                        <h3>ì„ íƒëœ ì¹´ë“œë“¤</h3>
                        <div class="selected-cards-list">
                            <div 
                                v-for="(card, index) in selectedCards" 
                                :key="card.id"
                                class="selected-card-item">
                                <div class="card-number">{{ index + 1 }}ë²ˆì§¸ ì¹´ë“œ</div>
                                <div class="card-name">{{ card.name }}</div>
                                <div class="card-direction">{{ card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥' }}</div>
                                <div class="card-type">{{ card.major_minor === 'major' ? 'ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜' : 'ë§ˆì´ë„ˆ ì•„ë¥´ì¹´ë‚˜' }}</div>
                                <button @click="removeCard(index)" class="remove-btn">âŒ ì œê±°</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì„ íƒ ì™„ë£Œ ë²„íŠ¼ -->
                    <div v-if="selectedCards.length === 3" class="selection-complete">
                        <button @click="completeSelection" class="btn btn-secondary">
                            ğŸ”® ë¦¬ë”© ì‹œì‘í•˜ê¸° (3/3)
                        </button>
                    </div>
                </div>
            `,
            methods: {
                selectRandomCard() {
                    if (this.selectedCards.length >= 3) {
                        alert('ì´ë¯¸ 3ì¥ì˜ ì¹´ë“œë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.');
                        return;
                    }
                    
                    this.isSelecting = true;
                    
                    // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ìœ„í•œ ì§€ì—°
                    setTimeout(() => {
                        const availableCards = this.cards.filter(card => 
                            !this.selectedCards.find(selected => selected.id === card.id)
                        );
                        
                        if (availableCards.length === 0) {
                            alert('ì„ íƒí•  ìˆ˜ ìˆëŠ” ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.');
                            this.isSelecting = false;
                            return;
                        }
                        
                        // ëœë¤ ì¹´ë“œ ì„ íƒ
                        const randomIndex = Math.floor(Math.random() * availableCards.length);
                        const selectedCard = availableCards[randomIndex];
                        
                        // ëœë¤ ì—­ë°©í–¥ ì„¤ì •
                        const isReversed = Math.random() > 0.5;
                        
                        this.selectedCards.push({
                            ...selectedCard,
                            reversed: isReversed
                        });
                        
                        this.isSelecting = false;
                    }, 500); // 0.5ì´ˆ ì§€ì—°ìœ¼ë¡œ ì„ íƒ íš¨ê³¼ ì—°ì¶œ
                },
                
                removeCard(index) {
                    this.selectedCards.splice(index, 1);
                },
                
                resetSelection() {
                    this.selectedCards = [];
                },
                
                completeSelection() {
                    if (this.selectedCards.length === 3) {
                        this.$emit('selection-complete', this.selectedCards);
                    }
                }
            }
        };

        const CardSpread = {
            props: ['selectedCards'],
            data() {
                return {
                    localSelectedCards: []
                };
            },
                         watch: {
                 selectedCards: {
                     immediate: true,
                     deep: true,
                     handler(newCards) {
                         console.log('CardSpread selectedCards ë³€ê²½ë¨:', newCards);
                         
                         // ê°„ë‹¨í•˜ê³  ëª…í™•í•œ ë¡œì§
                         if (newCards && Array.isArray(newCards) && newCards.length > 0) {
                             this.localSelectedCards = [...newCards];
                             console.log('localSelectedCards ì„¤ì •ë¨:', this.localSelectedCards);
                         } else {
                             this.localSelectedCards = [];
                             console.log('localSelectedCards ë¹ˆ ë°°ì—´ë¡œ ì„¤ì •ë¨');
                         }
                     }
                 }
             },
                         mounted() {
                 console.log('CardSpread ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ë¨');
                 console.log('selectedCards props:', this.selectedCards);
                 
                 // mountedì—ì„œë„ selectedCardsê°€ ìˆìœ¼ë©´ ì„¤ì •
                 if (this.selectedCards && Array.isArray(this.selectedCards) && this.selectedCards.length > 0) {
                     this.localSelectedCards = [...this.selectedCards];
                     console.log('mountedì—ì„œ localSelectedCards ì„¤ì •ë¨:', this.localSelectedCards);
                 } else {
                     console.log('mountedì—ì„œ selectedCardsê°€ ì—†ìŒ, watchì—ì„œ ì²˜ë¦¬ ëŒ€ê¸°');
                 }
             },
            template: `
                <div class="section card-spread">
                    <h2>ğŸ´ ì„ íƒëœ ì¹´ë“œ ìŠ¤í”„ë ˆë“œ</h2>
                    <p class="text-center mb-3">ì„ íƒëœ 3ì¥ì˜ ì¹´ë“œë¥¼ í™•ì¸í•˜ê³  ë¦¬ë”©ì„ ì‹œì‘í•˜ì„¸ìš”</p>
                    
                                         <!-- ë””ë²„ê¹… ì •ë³´ -->
                     <div style="background: #f0f0f0; padding: 10px; margin: 10px; border: 1px solid #ccc; font-family: monospace; font-size: 12px;">
                         <p><strong>ë””ë²„ê¹… ì •ë³´:</strong></p>
                         <p>selectedCards props íƒ€ì…: {{ typeof selectedCards }}</p>
                         <p>selectedCards props ê¸¸ì´: {{ selectedCards ? selectedCards.length : 'undefined' }}</p>
                         <p>localSelectedCards íƒ€ì…: {{ typeof localSelectedCards }}</p>
                         <p>localSelectedCards ê¸¸ì´: {{ localSelectedCards ? localSelectedCards.length : 'undefined' }}</p>
                         <p>localSelectedCards ë‚´ìš©: {{ JSON.stringify(localSelectedCards, null, 2) }}</p>
                     </div>
                    
                    <div class="spread-container">
                        <div class="spread-layout">
                                                         <div class="card-position past">
                                <h4>ê³¼ê±°</h4>
                                <div class="card-display">
                                    <div class="card-name">{{ getCardName(0) }}</div>
                                    <div class="card-direction">{{ getCardDirection(0) }}</div>
                                </div>
                            </div>
                            
                            <div class="card-position present">
                                <h4>í˜„ì¬</h4>
                                <div class="card-display">
                                    <div class="card-name">{{ getCardName(1) }}</div>
                                    <div class="card-direction">{{ getCardDirection(1) }}</div>
                                </div>
                            </div>
                            
                            <div class="card-position future">
                                <h4>ë¯¸ë˜</h4>
                                <div class="card-display">
                                    <div class="card-name">{{ getCardName(2) }}</div>
                                    <div class="card-direction">{{ getCardDirection(2) }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="spread-actions">
                        <button @click="startReading" class="btn btn-primary">
                            ğŸ”® ë¦¬ë”© ì‹œì‘
                        </button>
                        <button @click="$emit('reshuffle')" class="btn btn-secondary">
                            ğŸ”„ ë‹¤ì‹œ ì„ê¸°
                        </button>
                    </div>
                </div>
            `,
                         methods: {
                 getCardName(index) {
                     console.log(`getCardName(${index}) í˜¸ì¶œë¨`);
                     console.log('this.localSelectedCards:', this.localSelectedCards);
                     console.log('this.localSelectedCards ê¸¸ì´:', this.localSelectedCards ? this.localSelectedCards.length : 'undefined');
                     
                     if (!this.localSelectedCards || !Array.isArray(this.localSelectedCards) || this.localSelectedCards.length === 0) {
                         console.log(`ì¹´ë“œ ${index} ì—†ìŒ - localSelectedCardsê°€ ë¹„ì–´ìˆìŒ`);
                         return 'ì¹´ë“œ ì—†ìŒ';
                     }
                     
                     if (!this.localSelectedCards[index]) {
                         console.log(`ì¹´ë“œ ${index} ì—†ìŒ - í•´ë‹¹ ì¸ë±ìŠ¤ì— ì¹´ë“œê°€ ì—†ìŒ`);
                         return 'ì¹´ë“œ ì—†ìŒ';
                     }
                     
                     const cardName = this.localSelectedCards[index].name || 'ì¹´ë“œ ì—†ìŒ';
                     console.log(`ì¹´ë“œ ${index} ì´ë¦„:`, cardName);
                     return cardName;
                 },
                 getCardDirection(index) {
                     console.log(`getCardDirection(${index}) í˜¸ì¶œë¨`);
                     
                     if (!this.localSelectedCards || !Array.isArray(this.localSelectedCards) || this.localSelectedCards.length === 0) {
                         console.log(`ì¹´ë“œ ${index} ë°©í–¥ ì—†ìŒ - localSelectedCardsê°€ ë¹„ì–´ìˆìŒ`);
                         return 'ì •ë°©í–¥';
                     }
                     
                     if (!this.localSelectedCards[index]) {
                         console.log(`ì¹´ë“œ ${index} ë°©í–¥ ì—†ìŒ - í•´ë‹¹ ì¸ë±ìŠ¤ì— ì¹´ë“œê°€ ì—†ìŒ`);
                         return 'ì •ë°©í–¥';
                     }
                     
                     const direction = this.localSelectedCards[index].reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥';
                     console.log(`ì¹´ë“œ ${index} ë°©í–¥:`, direction);
                     return direction;
                 },
                                 startReading() {
                    console.log('=== CardSpread startReading í˜¸ì¶œë¨ ===');
                    console.log('this.localSelectedCards:', this.localSelectedCards);
                    console.log('this.localSelectedCards íƒ€ì…:', typeof this.localSelectedCards);
                    console.log('this.localSelectedCards ê¸¸ì´:', this.localSelectedCards ? this.localSelectedCards.length : 'undefined');
                    
                    if (!this.localSelectedCards || !Array.isArray(this.localSelectedCards) || this.localSelectedCards.length === 0) {
                        console.error('CardSpread: ì„ íƒëœ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤!');
                        console.error('localSelectedCards ìƒíƒœ:', this.localSelectedCards);
                        alert('ì„ íƒëœ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ì¹´ë“œë¥¼ ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    console.log('CardSpreadì—ì„œ ì´ë²¤íŠ¸ ë°œìƒ ì „ ë°ì´í„° í™•ì¸:');
                    console.log('ì „ë‹¬í•  ì¹´ë“œë“¤:', this.localSelectedCards);
                    console.log('ì¹´ë“œ 1:', this.localSelectedCards[0]);
                    console.log('ì¹´ë“œ 2:', this.localSelectedCards[1]);
                    console.log('ì¹´ë“œ 3:', this.localSelectedCards[2]);
                    
                    // ì´ë²¤íŠ¸ ë°œìƒ (ë§¤ê°œë³€ìˆ˜ ì—†ì´)
                    this.$emit('start-reading');
                    console.log('=== CardSpread startReading ì™„ë£Œ ===');
                }
             }
        };

        const ReadingResult = {
            props: ['readingData'],
            mounted() {
                console.log('=== ReadingResult ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ë¨ ===');
                console.log('readingData props:', this.readingData);
                console.log('readingData props íƒ€ì…:', typeof this.readingData);
                console.log('readingData props ì¡´ì¬ ì—¬ë¶€:', !!this.readingData);
                
                if (this.readingData) {
                    console.log('readingData ì „ì²´ ë‚´ìš©:', JSON.stringify(this.readingData, null, 2));
                    console.log('readingData.cards:', this.readingData.cards);
                    console.log('readingData.cards íƒ€ì…:', typeof this.readingData.cards);
                    console.log('readingData.cards ê¸¸ì´:', this.readingData.cards ? this.readingData.cards.length : 'undefined');
                    console.log('readingData.cards ë‚´ìš©:', JSON.stringify(this.readingData.cards, null, 2));
                    console.log('readingData.purpose:', this.readingData.purpose);
                    console.log('readingData.purpose íƒ€ì…:', typeof this.readingData.purpose);
                    console.log('readingData.cardMeanings:', this.readingData.cardMeanings);
                    console.log('readingData.cardMeanings íƒ€ì…:', typeof this.readingData.cardMeanings);
                    console.log('readingData.cardMeanings ê¸¸ì´:', this.readingData.cardMeanings ? this.readingData.cardMeanings.length : 'undefined');
                    console.log('readingData.cardMeanings ë‚´ìš©:', JSON.stringify(this.readingData.cardMeanings, null, 2));
                    console.log('readingData.combination:', this.readingData.combination);
                    console.log('readingData.combination íƒ€ì…:', typeof this.readingData.combination);
                    console.log('readingData.combination ë‚´ìš©:', JSON.stringify(this.readingData.combination, null, 2));
                    console.log('readingData.timestamp:', this.readingData.timestamp);
                    console.log('readingData.timestamp íƒ€ì…:', typeof this.readingData.timestamp);
                } else {
                    console.warn('readingDataê°€ null ë˜ëŠ” undefinedì…ë‹ˆë‹¤!');
                }
                console.log('=== ReadingResult ë§ˆìš´íŠ¸ ì™„ë£Œ ===');
            },
            template: `
                <div class="section reading-result">
                    <h2>âœ¨ íƒ€ë¡œ ë¦¬ë”© ê²°ê³¼</h2>
                    
                                         <!-- ë””ë²„ê¹… ì •ë³´ -->
                     <div style="background: #f0f0f0; padding: 10px; margin: 10px; border: 1px solid #ccc; font-family: monospace; font-size: 12px;">
                         <p><strong>ReadingResult ë””ë²„ê¹… ì •ë³´:</strong></p>
                         <p>readingData props íƒ€ì…: {{ typeof readingData }}</p>
                         <p>readingData ì¡´ì¬ ì—¬ë¶€: {{ readingData ? 'ìˆìŒ' : 'ì—†ìŒ' }}</p>
                         <p>readingData ê°’: {{ readingData }}</p>
                         <p v-if="readingData">readingData ì „ì²´ ë‚´ìš©: {{ JSON.stringify(readingData, null, 2) }}</p>
                         <p v-if="readingData">readingData.cards íƒ€ì…: {{ typeof readingData.cards }}</p>
                         <p v-if="readingData">readingData.cards ì¡´ì¬ ì—¬ë¶€: {{ readingData.cards ? 'ìˆìŒ' : 'ì—†ìŒ' }}</p>
                         <p v-if="readingData">readingData.cards ê¸¸ì´: {{ readingData.cards ? readingData.cards.length : 'undefined' }}</p>
                         <p v-if="readingData">readingData.cards ë‚´ìš©: {{ JSON.stringify(readingData.cards, null, 2) }}</p>
                         <p v-if="readingData">readingData.purpose: {{ readingData.purpose }}</p>
                         <p v-if="readingData">readingData.purpose íƒ€ì…: {{ typeof readingData.purpose }}</p>
                         <p v-if="readingData">readingData.cardMeanings íƒ€ì…: {{ typeof readingData.cardMeanings }}</p>
                         <p v-if="readingData">readingData.cardMeanings ì¡´ì¬ ì—¬ë¶€: {{ readingData.cardMeanings ? 'ìˆìŒ' : 'ì—†ìŒ' }}</p>
                         <p v-if="readingData">readingData.cardMeanings ê¸¸ì´: {{ readingData.cardMeanings ? readingData.cardMeanings.length : 'undefined' }}</p>
                         <p v-if="readingData">readingData.cardMeanings ë‚´ìš©: {{ JSON.stringify(readingData.cardMeanings, null, 2) }}</p>
                         <p v-if="readingData">readingData.combination íƒ€ì…: {{ typeof readingData.combination }}</p>
                         <p v-if="readingData">readingData.combination ì¡´ì¬ ì—¬ë¶€: {{ readingData.combination ? 'ìˆìŒ' : 'ì—†ìŒ' }}</p>
                         <p v-if="readingData">readingData.combination ë‚´ìš©: {{ JSON.stringify(readingData.combination, null, 2) }}</p>
                         <p v-if="readingData">readingData.timestamp: {{ readingData.timestamp }}</p>
                         <p v-if="readingData">readingData.timestamp íƒ€ì…: {{ typeof readingData.timestamp }}</p>
                     </div>
                    
                    <div v-if="readingData" class="result-content">
                        <div class="result-summary">
                            <h3>ğŸ“‹ ë¦¬ë”© ìš”ì•½</h3>
                            <p><strong>ëª©ì :</strong> {{ getPurposeName(readingData.purpose) }}</p>
                            <p><strong>ë¦¬ë”© ì‹œê°„:</strong> {{ formatDate(readingData.timestamp) }}</p>
                        </div>
                        
                        <div class="cards-summary">
                            <h3>ğŸ´ ì„ íƒëœ ì¹´ë“œ</h3>
                            <div class="selected-cards-summary">
                                <div v-for="(card, index) in getSafeCards()" :key="card.id" class="card-summary">
                                    <div class="position">{{ getPositionName(index) }}</div>
                                    <div class="card-info">
                                        <div class="card-name">{{ card.name || 'ì¹´ë“œ ì—†ìŒ' }}</div>
                                        <div class="card-direction">{{ card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥' }}</div>
                                        <div class="card-meaning">{{ getCardMeaning(card, index) }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="reading-interpretation">
                            <h3>ğŸ”® í•´ì„</h3>
                            <div class="interpretation-content">
                                <p><strong>ì „ì²´ì ì¸ ì˜ë¯¸:</strong></p>
                                <p>{{ readingData.combination?.overall_meaning || 'ê¸°ë³¸ì ì¸ í•´ì„ì´ ì œê³µë©ë‹ˆë‹¤.' }}</p>
                                
                                <p><strong>ì¡°ì–¸:</strong></p>
                                <p>{{ readingData.combination?.advice || 'í˜„ì¬ ìƒí™©ì„ ì˜ ê´€ì°°í•˜ê³  ë¯¸ë˜ë¥¼ ì¤€ë¹„í•˜ì„¸ìš”.' }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-actions">
                        <button @click="$emit('new-reading')" class="btn btn-primary">
                            ğŸ†• ìƒˆë¡œìš´ ë¦¬ë”©
                        </button>
                    </div>
                </div>
            `,
            methods: {
                getPurposeName(purpose) {
                    const purposes = {
                        'love': 'ì—°ì• /ì‚¬ë‘',
                        'career': 'ì§ì¥/ì¼',
                        'daily': 'ì˜¤ëŠ˜ì˜ ìš´ì„¸',
                        'health': 'ê±´ê°•',
                        'money': 'ê¸ˆì „'
                    };
                    return purposes[purpose] || purpose;
                },
                formatDate(timestamp) {
                    return new Date(timestamp).toLocaleString('ko-KR');
                },
                getPositionName(index) {
                    const positions = ['ê³¼ê±°', 'í˜„ì¬', 'ë¯¸ë˜'];
                    return positions[index] || '';
                },
                getSafeCards() {
                    if (!this.readingData || !this.readingData.cards || !Array.isArray(this.readingData.cards)) {
                        return [];
                    }
                    return this.readingData.cards;
                },
                getCardMeaning(card, index) {
                    if (!this.readingData || !this.readingData.cardMeanings || !this.readingData.cardMeanings[index]) {
                        return 'ì˜ë¯¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                    }
                    
                    const meaning = this.readingData.cardMeanings[index];
                    if (!meaning.meaning) {
                        return 'ì˜ë¯¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
                    }
                    
                    // ì˜ë¯¸ í…ìŠ¤íŠ¸ë¥¼ ì§§ê²Œ ìë¥´ê¸°
                    return meaning.meaning.length > 100 ? 
                           meaning.meaning.substring(0, 100) + '...' : 
                           meaning.meaning;
                }
            }
        };

        const UserHistory = {
            template: `
                <div class="section user-history">
                    <h2>ğŸ“š ë¦¬ë”© íˆìŠ¤í† ë¦¬</h2>
                    <p class="text-center mb-3">ì´ì „ ë¦¬ë”© ê¸°ë¡ì„ í™•ì¸í•˜ì„¸ìš”</p>
                    
                    <div class="history-content">
                        <p>íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥ì€ ë¡œê·¸ì¸ í›„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        <button @click="$emit('back-to-main')" class="btn btn-secondary">
                            â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                    </div>
                </div>
            `
        };

        // ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        function updateCurrentTime() {
            document.getElementById('current-time').textContent = new Date().toLocaleString();
        }

        function checkVueStatus() {
            if (typeof Vue !== 'undefined') {
                document.getElementById('vue-status').textContent = 'âœ… ë¡œë“œë¨';
                document.getElementById('vue-status').className = 'success';
            } else {
                document.getElementById('vue-status').textContent = 'âŒ ë¡œë“œ ì‹¤íŒ¨';
                document.getElementById('vue-status').className = 'error';
            }
        }

        function checkCSSStatus() {
            const styleSheets = document.styleSheets;
            let cssLoaded = false;
            
            for (let i = 0; i < styleSheets.length; i++) {
                try {
                    if (styleSheets[i].href && styleSheets[i].href.includes('style.css')) {
                        cssLoaded = true;
                        break;
                    }
                } catch (e) {
                    // CORS ì˜¤ë¥˜ ë¬´ì‹œ
                }
            }
            
            if (cssLoaded) {
                document.getElementById('css-status').textContent = 'âœ… ë¡œë“œë¨';
                document.getElementById('css-status').className = 'success';
            } else {
                document.getElementById('css-status').textContent = 'âŒ ë¡œë“œ ì‹¤íŒ¨';
                document.getElementById('css-status').className = 'error';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.addEventListener('load', function() {
            updateCurrentTime();
            checkVueStatus();
            checkCSSStatus();
            
            // 1ì´ˆë§ˆë‹¤ ì‹œê°„ ì—…ë°ì´íŠ¸
            setInterval(updateCurrentTime, 1000);
        });

        const app = createApp({
            data() {
                return {
                    isLoading: true,
                    showSetupGuide: false,
                    currentStep: 'purpose',
                    selectedPurpose: null,
                    cards: [],
                    selectedCards: [],
                    readingData: null,
                    loadingMessage: 'ì‹œìŠ¤í…œì„ ì´ˆê¸°í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤...'
                };
            },
            async mounted() {
                await this.initializeApp();
            },
            methods: {
                async initializeApp() {
                    try {
                        this.loadingMessage = 'Supabase ì—°ê²°ì„ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
                        
                        // Supabase ì—°ê²° í™•ì¸
                        await checkSupabaseConnection();
                        
                        this.loadingMessage = 'ì¹´ë“œ ë°ì´í„°ë¥¼ ë¡œë”©í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
                        
                        // ì¹´ë“œ ë°ì´í„° ë¡œë“œ
                        this.cards = await loadCards();
                        
                        this.isLoading = false;
                        console.log('ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì™„ë£Œ');
                        
                    } catch (error) {
                        console.error('ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                        this.showSetupGuide = true;
                        this.isLoading = false;
                        showSetupGuide();
                    }
                },
                
                onPurposeSelected(purpose) {
                    this.selectedPurpose = purpose;
                    this.currentStep = 'deck';
                },
                
                                 onCardSelectionComplete(cards) {
                     console.log('=== onCardSelectionComplete í˜¸ì¶œë¨ ===');
                     console.log('ì „ë‹¬ë°›ì€ cards:', cards);
                     console.log('cards íƒ€ì…:', typeof cards);
                     console.log('cards ê¸¸ì´:', cards ? cards.length : 'undefined');
                     console.log('cards ë‚´ìš©:', JSON.stringify(cards, null, 2));
                     
                     console.log('currentStep ë³€ê²½ ì „:', this.currentStep);
                     console.log('selectedCards ì„¤ì • ì „:', this.selectedCards);
                     
                     // ë°ì´í„° ì„¤ì •ê³¼ ë‹¨ê³„ ë³€ê²½ì„ ë™ì‹œì— ì‹¤í–‰
                     this.selectedCards = cards;
                     this.currentStep = 'spread';
                     
                     console.log('this.selectedCards ì„¤ì •ë¨:', this.selectedCards);
                     console.log('this.selectedCards íƒ€ì…:', typeof this.selectedCards);
                     console.log('this.selectedCards ê¸¸ì´:', this.selectedCards ? this.selectedCards.length : 'undefined');
                     console.log('currentStep ë³€ê²½ í›„:', this.currentStep);
                     console.log('=== onCardSelectionComplete ì™„ë£Œ ===');
                 },
                
                async onStartReading() {
                    try {
                        this.isLoading = true;
                        
                        console.log('=== onStartReading í˜¸ì¶œë¨ ===');
                        console.log('this.selectedCards:', this.selectedCards);
                        console.log('this.selectedCards íƒ€ì…:', typeof this.selectedCards);
                        console.log('this.selectedCards ê¸¸ì´:', this.selectedCards ? this.selectedCards.length : 'undefined');
                        console.log('this.selectedCards ë‚´ìš©:', JSON.stringify(this.selectedCards, null, 2));
                        console.log('ì„ íƒëœ ëª©ì :', this.selectedPurpose);
                        console.log('ì„ íƒëœ ëª©ì  íƒ€ì…:', typeof this.selectedPurpose);
                        
                        // this.selectedCards ì§ì ‘ ì‚¬ìš©
                        if (!this.selectedCards || !Array.isArray(this.selectedCards) || this.selectedCards.length === 0) {
                            console.error('ì„ íƒëœ ì¹´ë“œ ê²€ì¦ ì‹¤íŒ¨!');
                            console.error('selectedCards ì¡´ì¬ ì—¬ë¶€:', !!this.selectedCards);
                            console.error('selectedCards ë°°ì—´ ì—¬ë¶€:', Array.isArray(this.selectedCards));
                            console.error('selectedCards ê¸¸ì´:', this.selectedCards ? this.selectedCards.length : 'undefined');
                            throw new Error('ì„ íƒëœ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ì¹´ë“œë¥¼ ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.');
                        }
                        
                        const selectedCards = this.selectedCards;
                        console.log('ì‚¬ìš©í•  ì¹´ë“œë“¤:', selectedCards);
                        console.log('ì‚¬ìš©í•  ì¹´ë“œë“¤ íƒ€ì…:', typeof selectedCards);
                        console.log('ì‚¬ìš©í•  ì¹´ë“œë“¤ ê¸¸ì´:', selectedCards.length);
                        
                        // ì„ íƒëœ ì¹´ë“œë“¤ì˜ ì‹¤ì œ ì˜ë¯¸ë¥¼ ë¶„ì„
                        const cardMeanings = selectedCards.map((card, index) => {
                            console.log(`=== ì¹´ë“œ ${index + 1} ë¶„ì„ ì‹œì‘ ===`);
                            console.log(`ì¹´ë“œ ${index + 1} ì›ë³¸ ë°ì´í„°:`, card);
                            console.log(`ì¹´ë“œ ${index + 1} name:`, card.name);
                            console.log(`ì¹´ë“œ ${index + 1} reversed:`, card.reversed);
                            console.log(`ì¹´ë“œ ${index + 1} upright_meaning:`, card.upright_meaning);
                            console.log(`ì¹´ë“œ ${index + 1} reversed_meaning:`, card.reversed_meaning);
                            console.log(`ì¹´ë“œ ${index + 1} keywords:`, card.keywords);
                            
                            const meaning = {
                                name: card.name,
                                position: ['ê³¼ê±°', 'í˜„ì¬', 'ë¯¸ë˜'][index] || 'ê³¼ê±°',
                                meaning: card.reversed ? card.reversed_meaning : card.upright_meaning,
                                keywords: card.keywords,
                                isReversed: card.reversed
                            };
                            
                            console.log(`ì¹´ë“œ ${index + 1} ìƒì„±ëœ ì˜ë¯¸:`, meaning);
                            console.log(`=== ì¹´ë“œ ${index + 1} ë¶„ì„ ì™„ë£Œ ===`);
                            return meaning;
                        });
                        
                        console.log('ì¹´ë“œ ì˜ë¯¸ ë¶„ì„ ì™„ë£Œ:', cardMeanings);
                        console.log('ì¹´ë“œ ì˜ë¯¸ ë¶„ì„ íƒ€ì…:', typeof cardMeanings);
                        console.log('ì¹´ë“œ ì˜ë¯¸ ë¶„ì„ ê¸¸ì´:', cardMeanings.length);
                        
                        // ì „ì²´ì ì¸ í•´ì„ ìƒì„±
                        console.log('=== í•´ì„ ìƒì„± ì‹œì‘ ===');
                        const overallMeaning = this.generateOverallMeaning(cardMeanings, this.selectedPurpose);
                        const advice = this.generateAdvice(cardMeanings, this.selectedPurpose);
                        
                        console.log('ìƒì„±ëœ ì „ì²´ ì˜ë¯¸:', overallMeaning);
                        console.log('ìƒì„±ëœ ì¡°ì–¸:', advice);
                        console.log('=== í•´ì„ ìƒì„± ì™„ë£Œ ===');
                        
                        // ë¦¬ë”© ê²°ê³¼ ìƒì„±
                        console.log('=== ë¦¬ë”© ë°ì´í„° ìƒì„± ì‹œì‘ ===');
                        this.readingData = {
                            cards: selectedCards,
                            purpose: this.selectedPurpose,
                            cardMeanings: cardMeanings,
                            combination: {
                                overall_meaning: overallMeaning,
                                advice: advice
                            },
                            timestamp: new Date()
                        };
                        
                        console.log('ë¦¬ë”© ë°ì´í„° ìƒì„± ì™„ë£Œ:', this.readingData);
                        console.log('readingData íƒ€ì…:', typeof this.readingData);
                        console.log('readingData.cards:', this.readingData.cards);
                        console.log('readingData.cards íƒ€ì…:', typeof this.readingData.cards);
                        console.log('readingData.cards ê¸¸ì´:', this.readingData.cards ? this.readingData.cards.length : 'undefined');
                        console.log('readingData.purpose:', this.readingData.purpose);
                        console.log('readingData.purpose íƒ€ì…:', typeof this.readingData.purpose);
                        console.log('readingData.cardMeanings:', this.readingData.cardMeanings);
                        console.log('readingData.cardMeanings íƒ€ì…:', typeof this.readingData.cardMeanings);
                        console.log('readingData.cardMeanings ê¸¸ì´:', this.readingData.cardMeanings ? this.readingData.cardMeanings.length : 'undefined');
                        console.log('readingData.combination:', this.readingData.combination);
                        console.log('readingData.combination íƒ€ì…:', typeof this.readingData.combination);
                        console.log('=== ë¦¬ë”© ë°ì´í„° ìƒì„± ì™„ë£Œ ===');
                        
                        console.log('currentStepì„ resultë¡œ ë³€ê²½í•˜ê¸° ì „:', this.currentStep);
                        this.currentStep = 'result';
                        console.log('currentStepì„ resultë¡œ ë³€ê²½ í›„:', this.currentStep);
                        console.log('=== onStartReading ì™„ë£Œ ===');
                        
                    } catch (error) {
                        console.error('ë¦¬ë”© ìƒì„± ì‹¤íŒ¨:', error);
                        console.error('ì˜¤ë¥˜ ìŠ¤íƒ:', error.stack);
                        console.error('ì˜¤ë¥˜ ë©”ì‹œì§€:', error.message);
                        console.error('ì˜¤ë¥˜ ì´ë¦„:', error.name);
                        alert(`ë¦¬ë”©ì„ ìƒì„±í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
                    } finally {
                        this.isLoading = false;
                        console.log('onStartReading finally ë¸”ë¡ ì‹¤í–‰ë¨');
                    }
                },
                
                onReshuffle() {
                    this.selectedCards = [];
                    this.currentStep = 'deck';
                },
                
                onNewReading() {
                    this.selectedPurpose = null;
                    this.selectedCards = [];
                    this.readingData = null;
                    this.currentStep = 'purpose';
                },
                
                async checkConnection() {
                    try {
                        console.log('ì—°ê²° í™•ì¸ ë²„íŠ¼ í´ë¦­ë¨');
                        
                        // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‹¤í–‰
                        const simpleTest = await simpleConnectionTest();
                        if (simpleTest) {
                            alert('ì—°ê²°ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!');
                            this.showSetupGuide = false;
                            await this.initializeApp();
                        } else {
                            alert('ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                        }
                    } catch (error) {
                        console.error('ì—°ê²° í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
                        alert(`ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${error.message}`);
                    }
                },
                
                showConnectionStatus() {
                    const status = this.isLoading ? 'ë¡œë”© ì¤‘' : 
                                 this.showSetupGuide ? 'ì„¤ì • í•„ìš”' : 'ì—°ê²°ë¨';
                    alert(`í˜„ì¬ ìƒíƒœ: ${status}`);
                },
                
                generateOverallMeaning(cardMeanings, purpose) {
                    try {
                        console.log('generateOverallMeaning í˜¸ì¶œ:', { cardMeanings, purpose });
                        
                        const purposeNames = {
                            'love': 'ì‚¬ë‘ê³¼ ê´€ê³„',
                            'career': 'ì§ì¥ê³¼ ì—…ë¬´',
                            'daily': 'ì˜¤ëŠ˜ì˜ ìš´ì„¸',
                            'health': 'ê±´ê°•ê³¼ ì›°ë¹™',
                            'money': 'ì¬ì •ê³¼ ëˆ'
                        };
                        
                        const purposeName = purposeNames[purpose] || 'ì¼ë°˜ì ì¸';
                        
                        // ì•ˆì „í•œ ì¹´ë“œ ì´ë¦„ ì¶”ì¶œ
                        const cardNames = cardMeanings.map(card => card?.name || 'ì•Œ ìˆ˜ ì—†ëŠ” ì¹´ë“œ');
                        
                        // ì¹´ë“œë“¤ì˜ í‚¤ì›Œë“œë¥¼ ë¶„ì„ (ì•ˆì „í•˜ê²Œ)
                        const keywords = cardMeanings
                            .map(card => card?.keywords)
                            .filter(k => k && typeof k === 'string')
                            .join(', ');
                        
                        const result = `${purposeName} ì¸¡ë©´ì—ì„œ ${cardNames[0]}, ${cardNames[1]}, ${cardNames[2]}ì˜ ì¡°í•©ì€ ${keywords || 'ë‹¤ì–‘í•œ'}ì˜ ì—ë„ˆì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê³¼ê±°ì˜ ê²½í—˜ì´ í˜„ì¬ì˜ ì„ íƒì— ì˜í–¥ì„ ë¯¸ì¹˜ê³ , ë¯¸ë˜ì˜ ë°©í–¥ì„±ì„ ì œì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.`;
                        
                        console.log('generateOverallMeaning ê²°ê³¼:', result);
                        return result;
                    } catch (error) {
                        console.error('generateOverallMeaning ì˜¤ë¥˜:', error);
                        return 'ì¹´ë“œë“¤ì˜ ì¡°í•©ì„ í†µí•´ í˜„ì¬ ìƒí™©ì„ ë¶„ì„í•œ ê²°ê³¼, ê· í˜• ì¡íŒ ë°œì „ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.';
                    }
                },
                
                generateAdvice(cardMeanings, purpose) {
                    try {
                        console.log('generateAdvice í˜¸ì¶œ:', { cardMeanings, purpose });
                        
                        const reversedCards = cardMeanings.filter(card => card?.isReversed);
                        const uprightCards = cardMeanings.filter(card => !card?.isReversed);
                        
                        console.log('ì—­ë°©í–¥ ì¹´ë“œ ìˆ˜:', reversedCards.length);
                        console.log('ì •ë°©í–¥ ì¹´ë“œ ìˆ˜:', uprightCards.length);
                        
                        let advice = '';
                        
                        if (reversedCards.length > 1) {
                            advice = 'ì—­ë°©í–¥ ì¹´ë“œê°€ ë§ì•„ í˜„ì¬ ì–´ë ¤ìš´ ì‹œê¸°ë¥¼ ê²ªê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ìƒí™©ì„ ê´€ì°°í•˜ì„¸ìš”.';
                        } else if (uprightCards.length > 1) {
                            advice = 'ì •ë°©í–¥ ì¹´ë“œê°€ ë§ì•„ ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ íë¥´ê³  ìˆìŠµë‹ˆë‹¤. ìì‹ ì˜ ì§ê°ì„ ë¯¿ê³  í–‰ë™í•˜ì„¸ìš”.';
                        } else {
                            advice = 'ê· í˜• ì¡íŒ ì¹´ë“œ ë°°ì¹˜ì…ë‹ˆë‹¤. í˜„ì¬ ìƒí™©ì„ ê°ê´€ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ì‹ ì¤‘í•˜ê²Œ íŒë‹¨í•˜ì„¸ìš”.';
                        }
                        
                        console.log('generateAdvice ê²°ê³¼:', advice);
                        return advice;
                    } catch (error) {
                        console.error('generateAdvice ì˜¤ë¥˜:', error);
                        return 'í˜„ì¬ ìƒí™©ì„ ì˜ ê´€ì°°í•˜ê³  ë¯¸ë˜ë¥¼ ì¤€ë¹„í•˜ì„¸ìš”.';
                    }
                }
            }
        });

        // ì»´í¬ë„ŒíŠ¸ ë“±ë¡
        app.component('purpose-selector', PurposeSelector);
        app.component('tarot-deck', TarotDeck);
        app.component('card-spread', CardSpread);
        app.component('reading-result', ReadingResult);
        app.component('user-history', UserHistory);

        // ì•± ë§ˆìš´íŠ¸
        app.mount('#app');
    </script>
</body>
</html>
